<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Getting Started • SpaDES.project</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Getting Started">
<meta property="og:description" content="SpaDES.project">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-58633549-3"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-58633549-3');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">SpaDES.project</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.8.9011</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/i-getting-started.html">Getting Started</a>
    </li>
    <li>
      <a href="../articles/iii-using-git-github.html">Using git for project development</a>
    </li>
    <li>
      <a href="../articles/iv-Installing-R.html">Installing R</a>
    </li>
    <li>
      <a href="../articles/v-finding-other-modules.html">Finding other modules</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/PredictiveEcology/SpaDES.project/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Getting Started</h1>
                        <h4 data-toc-skip class="author">Eliot
McIntire</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/PredictiveEcology/SpaDES.project/blob/HEAD/vignettes/i-getting-started.Rmd" class="external-link"><code>vignettes/i-getting-started.Rmd</code></a></small>
      <div class="hidden name"><code>i-getting-started.Rmd</code></div>

    </div>

    
    
<p><code>SpaDES</code> is a collection of R packages designed to provide
a flexible framework for ecological analysis, simulations, forecasting,
and other ecological tasks. At its core, a <code>SpaDES</code> analysis
revolves around the concept of a “module” - a self-contained unit of
code that performs a specific function and includes both
machine-readable and human-readable metadata. In a typical
<code>SpaDES</code> project, users often employ multiple modules,
whether they’ve authored them or they’ve been contributed by others.
This scalability introduces several challenges, including managing file
paths (e.g., for data inputs, outputs, figures, modules, and packages),
handling package dependencies, and coordinating the development of
multiple modules simultaneously. While it is possible to develop a
<code>SpaDES</code> project using methods familiar to the user, the
<code>SpaDES.project</code> package streamlines this process,
facilitating a clean, reproducible and reusable project setup for any
project. Default settings ensure that project files and packages are
kept isolated, preventing potential conflicts with other projects on the
same computer.</p>
<p>In the following section, we present a range of examples showcasing
the utilization of the <code><a href="../reference/setupProject.html">setupProject()</a></code> function. To ensure a
smooth understanding of these examples, we will begin by discussing the
necessary prerequisites.</p>
<div class="section level2">
<h2 id="setting-up-prerequisites-installing-system-dependencies-r-and-rstudio">Setting Up Prerequisites: Installing System Dependencies, R, and
RStudio<a class="anchor" aria-label="anchor" href="#setting-up-prerequisites-installing-system-dependencies-r-and-rstudio"></a>
</h2>
<p>To get started, users should have already installed R, RStudio, and
possibly other system-level dependencies.<br><a href="iv-Installing-R.html">See vignette here</a></p>
<p>Now that we’ve established the prerequisites, let’s explore various
examples of how to use the <code><a href="../reference/setupProject.html">setupProject()</a></code> function, ranging
from simple to moderately complex scenarios. We will start by installing
the package.</p>
</div>
<div class="section level2">
<h2 id="installing-spades-project">Installing <code>SpaDES.project</code><a class="anchor" aria-label="anchor" href="#installing-spades-project"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="st"><a href="https://spades-project.predictiveecology.org/" class="external-link">"SpaDES.project"</a></span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="op">{</span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"SpaDES.project"</span>, repos <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"predictiveecology.r-universe.dev"</span>, <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"repos"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>   <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="st"><a href="https://spades-project.predictiveecology.org/" class="external-link">"SpaDES.project"</a></span><span class="op">)</span><span class="op">}</span></span>
<span><span class="op">}</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="understanding-spades-projects-main-function-setupproject">Understanding <code>SpaDES.project</code>’s Main Function:
<code>setupProject()</code><a class="anchor" aria-label="anchor" href="#understanding-spades-projects-main-function-setupproject"></a>
</h2>
<p>For more details, see <code><a href="../reference/setupProject.html">?setupProject</a></code>, especially for
argument-specific descriptions.</p>
<div class="section level3">
<h3 id="function-objectives">Function objectives<a class="anchor" aria-label="anchor" href="#function-objectives"></a>
</h3>
<p>The primary five objectives of this function are:</p>
<p><strong>1. Preparation for
<code><a href="https://spades-core.predictiveecology.org/reference/simInit.html" class="external-link">SpaDES.core::simInit</a></code>:</strong> This functions is designed
to set the stage for a smooth transition into
<code><a href="https://spades-core.predictiveecology.org/reference/simInit.html" class="external-link">SpaDES.core::simInit</a></code>, i.e., the initiation of a collection
of SpaDES modules. After a <code>out &lt;- setupProject()</code> call,
the return can be passed directly to
<code>do.call(SpaDES.core::simInitAndSpades, out)</code>.</p>
<p><strong>2. Simplicity for Beginners, Versatility for
Experts:</strong> The functions are crafted to be approachable for
beginners, offering simplicity, while at the same time, providing the
power and flexibility needed to address the demands of highly intricate
projects, all within the same structural framework.</p>
<p><strong>3. Handling Package Complexity:</strong> These functions
address the complexities associated with R package installation and
loading, especially when working with modules created by various
users.</p>
<p><strong>4. Creating a Standardized Project Structure:</strong> They
facilitate the establishment of a consistent SpaDES project structure.
This uniformity eases the transition from one project to another,
regardless of project complexity, promoting a seamless and efficient
workflow.</p>
<p><strong>5. Minimizing .GlobalEnv Assignments:</strong> An important
goal is to encourage best practices by reducing the need for assignments
to the .GlobalEnv. This practice fosters clean, maintainable code that
remains reproducible even as project complexity grows.</p>
</div>
<div class="section level3">
<h3 id="function-tasks">Function Tasks<a class="anchor" aria-label="anchor" href="#function-tasks"></a>
</h3>
<p>This function performs a variety of tasks to set up a SpaDES project
by assigning values to these arguments:</p>
<ul>
<li>
<code>paths</code> - A standardized set of paths.<br>
</li>
<li>
<code>modules</code> - Either downloads them from a cloud repository
or user identifies local ones.<br>
</li>
<li>
<code>packages</code> - To install and/or load (using the
<code>require</code> argument) packages not already identified in the
metadata of the <code>modules</code>.</li>
<li>
<code>params</code> - For setting parameter values for any of the
<code>modules</code>.</li>
<li>
<code>options</code> - To configure basic <code>R</code>
<code>options</code>.</li>
</ul>
<p>More specifically, this function orchestrates a series of operations
in the following order: <code>setupPaths</code>,
<code>setupModules</code>, <code>setupPackages</code>,
<code>setupOptions</code>, <code>setupSideEffects</code>,
<code>setupParams</code>, and <code>setupGitIgnore</code>. This sequence
accomplishes several tasks, including the creation of folder structures,
installation of missing packages listed in either the
<code>packages</code> or <code>require</code> arguments, loading of
packages (limited to those specified in the <code>require</code>
argument), configuration of options, and the download or validation of
modules. Additionally, it returns elements that can be directly passed
to <code>simInit</code> or <code>simInitAndSpades</code>, specifically
modules, params, paths, times, and any named elements passed to …
(<code>Dots</code>). If desired, this function can also modify the
<code>.Rprofile</code> file for the project, ensuring that each time the
project is opened, it adopts specific <code><a href="https://rdrr.io/r/base/libPaths.html" class="external-link">.libPaths()</a></code>.</p>
<p>This sequence allows users to leverage settings (i.e., objects) that
are established before others. More on this below (section <a href="#what-makes-this-function-so-special">What Makes this Function so
Special</a>).</p>
<p>For user convenience, there are several auxiliary elements, as
described in the help file of the function:
<code>?setupProject()</code>.</p>
<p>The output from <code><a href="../reference/setupProject.html">setupProject()</a></code> is a list containing
several named elements. These elements are designed to be passed
directly to <code>simInit</code> to initialize a <code>simList</code>
and, potentially, a <code>spades</code> call.</p>
</div>
</div>
<div class="section level2">
<h2 id="what-makes-this-function-so-special">What Makes this Function so Special<a class="anchor" aria-label="anchor" href="#what-makes-this-function-so-special"></a>
</h2>
<p>In addition to its capability to specify paths, options, and
parameters for the entire simulation or workflow, regardless of the
modules used, this function offers three distinct advantages that
enhance its convenience, detailed below:</p>
<p><em>1. Versatile Argument Types:</em> Arguments can be provided as
both values and/or URLs, allowing flexibility in how information is
sourced and integrated into the setup.</p>
<p><em>2. Sequential Argument Processing:</em> Arguments are sourced in
a sequential manner during function evaluation. This sequential
processing enables a logical flow and great flexibility in setting up
the project.</p>
<p><em>3. Handling Missing Values:</em> The function accommodates
missing values gracefully, making it adaptable to various project
scenarios where certain parameters or information may not be yet
available.</p>
<div class="section level3">
<h3 id="versatile-argument-types">
<strong>1. Versatile Argument Types</strong><a class="anchor" aria-label="anchor" href="#versatile-argument-types"></a>
</h3>
<p>The first important advantage of <code><a href="../reference/setupProject.html">setupProject()</a></code> is the
type of inputs for arguments it can take, which can be lists of, and/or
paths. For most arguments, the values can be either named lists or
character vectors consisting of strings ending in <code>.R</code>,
representing <code>urls</code> to cloud or local R scripts to be
sourced. More specifically, the function arguments <code>paths</code>,
<code>options</code>, and <code>params</code>, can all understand lists
of named values, character vectors, or a mixture by using a list where
named elements are values and unnamed elements are character
strings/vectors. <em>Any unnamed character string/vector will be treated
as a file path.</em> If that file path has an @ symbol, it will be
assumed to be a file that exists on ⁠<a href="https://github.com" class="external-link uri">https://github.com</a>. So a user can pass values, or
pointers to remote and/or local paths that, themselves, have values.</p>
<p>The following will set an option as declared (i.e.,
<code>reproducible.useTerra = TRUE</code>), plus read the local
<code>inst/options.R</code> file (with relative path), plus download and
read the cloud-hosted
<code>PredictiveEcology/SpaDES.project@transition/inst/options.R</code>
file.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">out</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/setupProject.html">setupProject</a></span><span class="op">(</span></span>
<span>  options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>reproducible.useTerra <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                 <span class="st">"inst/options.R"</span>,</span>
<span>                 <span class="st">"PredictiveEcology/SpaDES.project@transition/inst/options.R"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">out</span>, <span class="st">"projectOptions"</span><span class="op">)</span></span>
<span><span class="co">#&gt;                             optionName</span></span>
<span><span class="co">#&gt;  1:              reproducible.useTerra</span></span>
<span><span class="co">#&gt;  2:                          fftempdir</span></span>
<span><span class="co">#&gt;  3:             future.globals.maxSize</span></span>
<span><span class="co">#&gt;  4:                   LandR.assertions</span></span>
<span><span class="co">#&gt;  5:                      LandR.verbose</span></span>
<span><span class="co">#&gt;  6:                       map.dataPath</span></span>
<span><span class="co">#&gt;  7:                      map.overwrite</span></span>
<span><span class="co">#&gt;  8:                       map.tilePath</span></span>
<span><span class="co">#&gt;  9:                    map.maxNumCores</span></span>
<span><span class="co">#&gt; 10:                    rasterMaxMemory</span></span>
<span><span class="co">#&gt; 11:       reproducible.destinationPath</span></span>
<span><span class="co">#&gt; 12:               reproducible.useGDAL</span></span>
<span><span class="co">#&gt; 13: reproducible.useNewDigestAlgorithm</span></span>
<span><span class="co">#&gt; 14:            reproducible.inputPaths</span></span>
<span><span class="co">#&gt; 15:               reproducible.devMode</span></span>
<span><span class="co">#&gt; 16:             reproducible.overwrite</span></span>
<span><span class="co">#&gt; 17:              reproducible.useCloud</span></span>
<span><span class="co">#&gt; 18:                   spades.inputPath</span></span>
<span><span class="co">#&gt; 19:            spades.moduleCodeChecks</span></span>
<span><span class="co">#&gt; 20:                spades.recoveryMode</span></span>
<span><span class="co">#&gt; 21:                  spades.useRequire</span></span>
<span><span class="co">#&gt;                             optionName</span></span>
<span><span class="co">#&gt;                                                           newValue</span></span>
<span><span class="co">#&gt;  1:                                                           TRUE</span></span>
<span><span class="co">#&gt;  2: C:/Users/emcintir/AppData/Local/Temp/Rtmp63PEH3/SpaDES.project</span></span>
<span><span class="co">#&gt;  3:                                                     1048576000</span></span>
<span><span class="co">#&gt;  4:                                                          FALSE</span></span>
<span><span class="co">#&gt;  5:                                                              1</span></span>
<span><span class="co">#&gt;  6:                          C:/Eliot/GitHub/SpaDES.project/inputs</span></span>
<span><span class="co">#&gt;  7:                                                          FALSE</span></span>
<span><span class="co">#&gt;  8:                                                      &lt;call[3]&gt;</span></span>
<span><span class="co">#&gt;  9:                                                              2</span></span>
<span><span class="co">#&gt; 10:                                                          5e+09</span></span>
<span><span class="co">#&gt; 11:                          C:/Eliot/GitHub/SpaDES.project/inputs</span></span>
<span><span class="co">#&gt; 12:                                                          FALSE</span></span>
<span><span class="co">#&gt; 13:                                                           TRUE</span></span>
<span><span class="co">#&gt; 14:                 C:/Eliot/OneDrive - NRCan RNCan/Documents/data</span></span>
<span><span class="co">#&gt; 15:                                                           TRUE</span></span>
<span><span class="co">#&gt; 16:                                                           TRUE</span></span>
<span><span class="co">#&gt; 17:                                                           TRUE</span></span>
<span><span class="co">#&gt; 18:                         C:/Eliot/GitHub/SpaDES.project/outputs</span></span>
<span><span class="co">#&gt; 19:                                                          FALSE</span></span>
<span><span class="co">#&gt; 20:                                                          FALSE</span></span>
<span><span class="co">#&gt; 21:                                                          FALSE</span></span>
<span><span class="co">#&gt;                                                           newValue</span></span>
<span><span class="co">#&gt;                                                                oldValue</span></span>
<span><span class="co">#&gt;  1:                                                                    </span></span>
<span><span class="co">#&gt;  2:                                                                    </span></span>
<span><span class="co">#&gt;  3:                                                                    </span></span>
<span><span class="co">#&gt;  4:                                                                    </span></span>
<span><span class="co">#&gt;  5:                                                                    </span></span>
<span><span class="co">#&gt;  6:                                                                    </span></span>
<span><span class="co">#&gt;  7:                                                                    </span></span>
<span><span class="co">#&gt;  8:                                                                    </span></span>
<span><span class="co">#&gt;  9:                                                                    </span></span>
<span><span class="co">#&gt; 10:                                                                    </span></span>
<span><span class="co">#&gt; 11:                                                                    </span></span>
<span><span class="co">#&gt; 12:                                                                    </span></span>
<span><span class="co">#&gt; 13:                                                                    </span></span>
<span><span class="co">#&gt; 14:                                                                    </span></span>
<span><span class="co">#&gt; 15:                                                                    </span></span>
<span><span class="co">#&gt; 16:                                                               FALSE</span></span>
<span><span class="co">#&gt; 17:                                                               FALSE</span></span>
<span><span class="co">#&gt; 18: C:\\Users\\emcintir\\AppData\\Local\\Temp\\Rtmp63PEH3/SpaDES/inputs</span></span>
<span><span class="co">#&gt; 19:                                                           &lt;list[5]&gt;</span></span>
<span><span class="co">#&gt; 20:                                                                   1</span></span>
<span><span class="co">#&gt; 21:                                                                TRUE</span></span>
<span><span class="co">#&gt;                                                                oldValue</span></span></code></pre></div>
<p>This approach allows for an organic growth of complexity, e.g., a
user begins with only named lists of values, but then as the number of
values increases, it may be helpful for clarity to put some in an
external file.</p>
</div>
<div class="section level3">
<h3 id="sequential-argument-processing">
<strong>2. Sequential Argument Processing</strong><a class="anchor" aria-label="anchor" href="#sequential-argument-processing"></a>
</h3>
<p>The second important advantage of <code><a href="../reference/setupProject.html">setupProject()</a></code>,
briefly mentioned above, is that argument values within each of the
function arguments are sourced in a sequential manner. This implies that
a prior value can be leveraged by a subsequent one <em>within the same
function call</em>. For example, users can set paths, and subsequently,
employ the paths list to configure options that can update or modify
paths as needed. Similarly, users can set times and apply the times list
for specific entries in the parameters (<code>params</code>)
configuration. For instance, consider the following example, where
<code>projectPath</code> is included as part of the list assigned to the
<code>paths</code> argument. This value is then utilized in the
subsequent list element:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 'modulePaths' is defined based on the previous argument 'projectPath' in the same function call.</span></span>
<span><span class="fu"><a href="../reference/setup.html">setupPaths</a></span><span class="op">(</span>paths <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>projectPath <span class="op">=</span> <span class="st">"here"</span>,</span>
<span>                        modulePath <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">paths</span><span class="op">[[</span><span class="st">"projectPath"</span><span class="op">]</span><span class="op">]</span>, <span class="st">"modules"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> </span></code></pre></div>
<p>Because of such sequential evaluation, the content with R scripts can
be sequential lists, and also the arguments can themselves be
sequential. This creates a hierarchy specified by the order. In this
fairly rich example, a user can first create a set of default options in
a file, then custom elements, then a list of more changes protected by
an ⁠if
<code>(user("userNamer")). In the following example,</code>setupOptions<code>will first parse the file (</code>inst/options.R<code>), maintaining an active named list of options that will be set (lets call that</code>opts<code>), then it will</code>modifyList(opts,
list(maxMemory =
6e+10))<code>, i.e., modify the list with a new value, then if the user is "emcintir", it will further modify the</code>opts<code>list. Finally, because this is</code>setupOptions<code>, it will call</code>options(opts)`
with the new list values:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/setup.html">setupOptions</a></span><span class="op">(</span>options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="st">"inst/options.R"</span>,                        <span class="co"># many items set because this is a file; has "future.globals.maxSize" = 5.24288e8</span></span>
<span>    future.globals.maxSize <span class="op">=</span> <span class="fl">4e8</span>,          <span class="co"># this value overrides first, because it is 2nd</span></span>
<span>    <span class="kw">if</span><span class="op">(</span><span class="fu"><a href="../reference/helpers.html">user</a></span><span class="op">(</span><span class="st">"emcintir"</span><span class="op">)</span><span class="op">)</span>                     <span class="co"># an "if" statement is OK --&gt; but must use list after</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>future.globals.maxSize <span class="op">=</span> <span class="fl">6e8</span><span class="op">)</span>     <span class="co"># conditional on user, value is overridden again</span></span>
<span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="handling-missing-values">
<strong>3. Handling Missing Values</strong><a class="anchor" aria-label="anchor" href="#handling-missing-values"></a>
</h3>
<p>To facilitate batch submission, users can specify arguments in the
form of <code>argument = value</code>, even when <code>value</code> is
missing (i.e., not previously defined in the Environment). This
unconventional approach may not typically work with standard argument
parsing, but it has been specifically designed to function within this
context. For instance, in the following example, you can specify
<code>.mode = .mode</code>. If R cannot find a valid value for
<code>.mode</code> on the right-hand side, it will gracefully skip
without raising an error. This feature enables users to source a script
with the following line from a batch script where <code>.mode</code> is
specified. When running this line separately, without the batch script
specification, <code>.mode</code> will have no value assigned to it.
Additionally, we include <code>.nodes</code> as an example of passing a
value that does exist. In the output, the non-existent
<code>.mode</code> will be returned as an unevaluated, captured list
element:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">.nodes</span> <span class="op">&lt;-</span> <span class="fl">2</span></span>
<span><span class="va">out</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/setupProject.html">setupProject</a></span><span class="op">(</span>.mode <span class="op">=</span> <span class="va">.mode</span>,</span>
<span>                    .nodes <span class="op">=</span> <span class="va">.nodes</span><span class="op">)</span></span>
<span><span class="va">out</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">".mode"</span>, <span class="st">".nodes"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="co">#&gt; $.mode</span></span>
<span><span class="co">#&gt; .mode</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $.nodes</span></span>
<span><span class="co">#&gt; [1] 2</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="relationship-between-setupproject-and-spades-coresiminit-call">Relationship between <code>setupProject()</code> and
<code>SpaDES.core::simInit</code> Call<a class="anchor" aria-label="anchor" href="#relationship-between-setupproject-and-spades-coresiminit-call"></a>
</h2>
<p>The output from <code><a href="../reference/setupProject.html">setupProject()</a></code> is a list containing
several named elements. These elements are designed to be passed
directly to <code>simInit</code> to initialize a <code>simList</code>
and, potentially, a <code>spades</code> call. Every
<code>setupProject</code> call can be used with <code>do.call</code> to
pass arguments to a <code>simInit</code> or
<code>simInitAndSpades</code> call.</p>
<pre><code><span><span class="va">sim</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/setupProject.html">setupProject</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span>what <span class="op">=</span> <span class="fu">SpaDES.core</span><span class="fu">::</span><span class="va"><a href="https://spades-core.predictiveecology.org/reference/simInitAndSpades.html" class="external-link">simInitAndSpades</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co">## or</span></span>
<span><span class="va">out</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/setupProject.html">setupProject</a></span><span class="op">(</span><span class="op">)</span> </span>
<span><span class="va">sim</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span><span class="fu">SpaDES.core</span><span class="fu">::</span><span class="va"><a href="https://spades-core.predictiveecology.org/reference/simInitAndSpades.html" class="external-link">simInitAndSpades</a></span>, <span class="va">out</span><span class="op">)</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="see-also">See Also<a class="anchor" aria-label="anchor" href="#see-also"></a>
</h2>
<p>In R, checkout the help files for other functions such as:
<code><a href="../reference/setup.html">?setupPaths</a></code> <code><a href="../reference/setup.html">?setupOptions</a></code>
<code><a href="../reference/setup.html">?setupPackages</a></code> <code><a href="../reference/setup.html">?setupModules</a></code>
<code><a href="../reference/setup.html">?setupGitIgnore</a></code></p>
<p>Other helpful functions that are worse going though are
<code><a href="../reference/helpers.html">?user</a></code>, <code><a href="../reference/helpers.html">?machine</a></code>, and <code><a href="../reference/helpers.html">?node</a></code>.</p>
</div>
<div class="section level2">
<h2 id="examples-of-usage-of-setupproject">Examples of usage of <code>setupProject()</code><a class="anchor" aria-label="anchor" href="#examples-of-usage-of-setupproject"></a>
</h2>
<div class="section level3">
<h3 id="get-modules-from-github">Get modules from GitHub<a class="anchor" aria-label="anchor" href="#get-modules-from-github"></a>
</h3>
<p>This will retrieve the module as specified, and place it in
<code>modulePath</code>, which is unspecified here, thus taking the
default. This specification will not re-download the file if it exists
locally, with a message indicating this each time. This specification
will also automatically install all missing packages that are in
<code>reqdPkgs</code> metadata of the module(s). NOTE: we can omit this
package installation step by specifying <code>package = NULL</code>.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">out</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/setupProject.html">setupProject</a></span><span class="op">(</span></span>
<span>  modules <span class="op">=</span> <span class="st">"PredictiveEcology/Biomass_borealDataPrep@development"</span>,</span>
<span>  packages <span class="op">=</span> <span class="cn">NULL</span> <span class="co"># for this example, skip installation of packages; normally don't do this</span></span>
<span><span class="op">)</span></span>
<span><span class="co"># Initiate a simInit and spades call:</span></span>
<span><span class="co"># do.call(SpaDES.core::simInitAndSpades, out)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="paths">Paths<a class="anchor" aria-label="anchor" href="#paths"></a>
</h3>
<p>All paths are relative to the <code>projectPath</code>, except for 2
specific exceptions: <code>packagePath</code> is not placed within the
<code>projectPath</code> and all “scratch” i.e., “temporary” folders,
are place in a subfolder of <code><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir()</a></code>.
<code>packagePath</code> is placed in the
<code>tools::R_user_dir(name)</code> folder, which is project specific,
but does not clutter the <code>projectPath</code> with hundreds of
folders that can interfere with many user actions especially in Rstudio.
For example, “Find in Files” will take much longer (especially on
Windows) if all the package files are in the <code>projectPath</code>
(there are ways around this, but they require custom setups).</p>
<p>In this example, <code>modulePath</code> will be set to
<code>file.path(packagePath, modulePath)</code>; since
<code>packagePath</code> is unspecified, <code>setupProject</code>
assumes the current directory is the desired root of the project.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://spades-project.predictiveecology.org/" class="external-link">SpaDES.project</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/setupProject.html">setupProject</a></span><span class="op">(</span>paths <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>modulePath <span class="op">=</span> <span class="st">"myModules"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; $modules</span></span>
<span><span class="co">#&gt; named character(0)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $paths</span></span>
<span><span class="co">#&gt; $paths$cachePath</span></span>
<span><span class="co">#&gt; [1] "C:/Eliot/GitHub/SpaDES.project/cache"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $paths$inputPath</span></span>
<span><span class="co">#&gt; [1] "C:/Eliot/GitHub/SpaDES.project/inputs"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $paths$modulePath</span></span>
<span><span class="co">#&gt; [1] "C:/Eliot/GitHub/SpaDES.project/myModules"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $paths$outputPath</span></span>
<span><span class="co">#&gt; [1] "C:/Eliot/GitHub/SpaDES.project/outputs"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $paths$rasterPath</span></span>
<span><span class="co">#&gt; [1] "C:/Users/emcintir/AppData/Local/Temp/Rtmp63PEH3/SpaDES.project/raster"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $paths$scratchPath</span></span>
<span><span class="co">#&gt; [1] "C:/Users/emcintir/AppData/Local/Temp/Rtmp63PEH3/SpaDES.project"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $paths$terraPath</span></span>
<span><span class="co">#&gt; [1] "C:/Users/emcintir/AppData/Local/Temp/Rtmp63PEH3/SpaDES.project/terra"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $params</span></span>
<span><span class="co">#&gt; list()</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $times</span></span>
<span><span class="co">#&gt; $times$start</span></span>
<span><span class="co">#&gt; [1] 0</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $times$end</span></span>
<span><span class="co">#&gt; [1] 1</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="default-values">Default values<a class="anchor" aria-label="anchor" href="#default-values"></a>
</h3>
<p>One compelling reason to use <code><a href="../reference/setupProject.html">setupProject()</a></code> is the
availability of numerous default values that can be leveraged, leading
to cleaner and more concise code in many instances. This code sets all
default values for <code>paths</code>.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://spades-project.predictiveecology.org/" class="external-link">SpaDES.project</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/setupProject.html">setupProject</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; $modules</span></span>
<span><span class="co">#&gt; named character(0)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $paths</span></span>
<span><span class="co">#&gt; $paths$cachePath</span></span>
<span><span class="co">#&gt; [1] "C:/Eliot/GitHub/SpaDES.project/cache"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $paths$inputPath</span></span>
<span><span class="co">#&gt; [1] "C:/Eliot/GitHub/SpaDES.project/inputs"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $paths$modulePath</span></span>
<span><span class="co">#&gt; [1] "C:/Eliot/GitHub/SpaDES.project/modules"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $paths$outputPath</span></span>
<span><span class="co">#&gt; [1] "C:/Eliot/GitHub/SpaDES.project/outputs"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $paths$rasterPath</span></span>
<span><span class="co">#&gt; [1] "C:/Users/emcintir/AppData/Local/Temp/Rtmp63PEH3/SpaDES.project/raster"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $paths$scratchPath</span></span>
<span><span class="co">#&gt; [1] "C:/Users/emcintir/AppData/Local/Temp/Rtmp63PEH3/SpaDES.project"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $paths$terraPath</span></span>
<span><span class="co">#&gt; [1] "C:/Users/emcintir/AppData/Local/Temp/Rtmp63PEH3/SpaDES.project/terra"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $params</span></span>
<span><span class="co">#&gt; list()</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $times</span></span>
<span><span class="co">#&gt; $times$start</span></span>
<span><span class="co">#&gt; [1] 0</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $times$end</span></span>
<span><span class="co">#&gt; [1] 1</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="arguments-sourced-sequentially">Arguments sourced sequentially<a class="anchor" aria-label="anchor" href="#arguments-sourced-sequentially"></a>
</h3>
<p>The argument values within each of the arguments are sourced
sequentially. This means that a previous value can be utilized by a
subsequent one.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Use the newValue in `secondValue`</span></span>
<span><span class="va">out</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/setupProject.html">setupProject</a></span><span class="op">(</span></span>
<span>             newValue <span class="op">=</span> <span class="fl">1</span>,</span>
<span>             secondValue <span class="op">=</span> <span class="va">newValue</span> <span class="op">+</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">out</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"newValue"</span>, <span class="st">"secondValue"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="co">#&gt; $newValue</span></span>
<span><span class="co">#&gt; [1] 1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $secondValue</span></span>
<span><span class="co">#&gt; [1] 2</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="arguments-not-sourced-to--globalenv">Arguments not sourced to .GlobalEnv<a class="anchor" aria-label="anchor" href="#arguments-not-sourced-to--globalenv"></a>
</h3>
<p>The <code>.GlobalEnv</code> in <code>R</code> is special because it
is in the search path of any user-created function. This is very
convenient, but also provides the potential for many problems. For
example, a variable could be misspelled in a code chunck, but the code
doesn’t fail because the <code>.GlobalEnv</code> has the same variable,
spelled correctly.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Gets the wrong version of the module</span></span>
<span><span class="va">githubRepo</span> <span class="op">=</span> <span class="st">"PredictiveEcology/Biomass_core@development"</span> <span class="co"># incorrect one -- used in error</span></span>
<span><span class="va">out</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/setupProject.html">setupProject</a></span><span class="op">(</span></span>
<span>             gitHubRepo <span class="op">=</span> <span class="st">"PredictiveEcology/Biomass_core@main"</span>, <span class="co"># The correct one --&gt; not used</span></span>
<span>             modules <span class="op">=</span> <span class="va">githubRepo</span>,</span>
<span>             packages <span class="op">=</span> <span class="cn">NULL</span> <span class="co"># no packages for this demonstration</span></span>
<span><span class="op">)</span></span>
<span><span class="va">out</span><span class="op">$</span><span class="va">modules</span> <span class="co"># shows @development, which is unexpected</span></span>
<span><span class="co">#&gt; PredictiveEcology/Biomass_core@development </span></span>
<span><span class="co">#&gt;                             "Biomass_core"</span></span>
<span></span>
<span><span class="co"># Initiate a simInit and spades call:</span></span>
<span><span class="co"># do.call(SpaDES.core::simInitAndSpades, out)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="with-options-and-params-set">With options and params set<a class="anchor" aria-label="anchor" href="#with-options-and-params-set"></a>
</h3>
<p>We can start to increase the complexity of the
<code>setupProject</code> call gradually. Once we have the module.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">out</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/setupProject.html">setupProject</a></span><span class="op">(</span></span>
<span>  options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>reproducible.useTerra <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>  params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>Biomass_borealDataPrep <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>.plots <span class="op">=</span> <span class="st">"screen"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  paths <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>modulePath <span class="op">=</span> <span class="st">"m"</span>,</span>
<span>               projectPath <span class="op">=</span> <span class="st">"."</span><span class="op">)</span>, <span class="co"># within vignette, project dir cannot be changed; user likely will</span></span>
<span>  modules <span class="op">=</span> <span class="st">"PredictiveEcology/Biomass_borealDataPrep@development"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; package 'pemisc' successfully unpacked and MD5 sums checked</span></span>
<span><span class="co">#&gt; package 'pkgbuild' successfully unpacked and MD5 sums checked</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; The downloaded binary packages are in</span></span>
<span><span class="co">#&gt;  C:\Users\emcintir\AppData\Local\Temp\Rtmp63PEH3\downloaded_packages</span></span>
<span><span class="co">#&gt; Warning: package 'SpaDES.project' is in use and will not be installed</span></span>
<span><span class="co"># Initiate a simInit and spades call:</span></span>
<span><span class="co"># do.call(SpaDES.core::simInitAndSpades, out)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="arguments-as-values-or-urls">Arguments as values or urls<a class="anchor" aria-label="anchor" href="#arguments-as-values-or-urls"></a>
</h3>
<p>For most arguments, the values can be either named lists or character
vectors consisting of strings ending in <code>.R</code>, representing
<code>urls</code> to cloud or local R scripts to be sourced. This
flexibility enables users to begin with simple argument values and
gradually introduce greater complexity as a project expands in
scale.</p>
<p>In this first example, <code>options</code> is set by parsing a file
that is at a remote location. This file will be downloaded first, if it
does not exist locally, then parsed from the local location.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">out</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/setupProject.html">setupProject</a></span><span class="op">(</span></span>
<span>  options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"PredictiveEcology/SpaDES.project@transition/inst/options.R"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    Biomass_borealDataPrep <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>.plots <span class="op">=</span> <span class="st">"screen"</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  paths <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>modulePath <span class="op">=</span> <span class="st">"m"</span>,</span>
<span>               projectPath <span class="op">=</span> <span class="st">"."</span><span class="op">)</span>, <span class="co"># within vignette, project dir cannot be changed; user likely will</span></span>
<span>  modules <span class="op">=</span> <span class="st">"PredictiveEcology/Biomass_borealDataPrep@development"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; package 'pkgbuild' successfully unpacked and MD5 sums checked</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; The downloaded binary packages are in</span></span>
<span><span class="co">#&gt;  C:\Users\emcintir\AppData\Local\Temp\Rtmp63PEH3\downloaded_packages</span></span>
<span><span class="co">#&gt; Warning: package 'SpaDES.project' is in use and will not be installed</span></span>
<span><span class="co"># Initiate a simInit and spades call:</span></span>
<span><span class="co"># do.call(SpaDES.core::simInitAndSpades, out)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="setting-arbitrary-arguments-using-defaultdots">Setting arbitrary arguments, using defaultDots<a class="anchor" aria-label="anchor" href="#setting-arbitrary-arguments-using-defaultdots"></a>
</h3>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">out</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/setupProject.html">setupProject</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"example_5"</span>, <span class="co"># puts in a folder with this name</span></span>
<span>  modules <span class="op">=</span> <span class="st">"PredictiveEcology/Biomass_borealDataPrep@development"</span>,</span>
<span>  sideEffects <span class="op">=</span> <span class="st">"PredictiveEcology/SpaDES.project@transition/inst/sideEffects.R"</span>,</span>
<span></span>
<span>  <span class="co"># if mode and studyAreaName are not available in the .GlobalEnv, then will use these</span></span>
<span>  defaultDots <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>mode <span class="op">=</span> <span class="st">"development"</span>,</span>
<span>                     studyAreaName <span class="op">=</span> <span class="st">"MB"</span><span class="op">)</span>,</span>
<span>  mode <span class="op">=</span> <span class="va">mode</span>, <span class="co"># may not exist in the .GlobalEnv, so `setup*` will use the defaultDots above</span></span>
<span>  studyAreaName <span class="op">=</span> <span class="va">studyAreaName</span><span class="co">#, # same as previous argument.</span></span>
<span>  <span class="co"># params = list("Biomass_borealDataPrep" = list(.useCache = mode))</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; package 'pkgbuild' successfully unpacked and MD5 sums checked</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; The downloaded binary packages are in</span></span>
<span><span class="co">#&gt;  C:\Users\emcintir\AppData\Local\Temp\Rtmp63PEH3\downloaded_packages</span></span>
<span><span class="co">#&gt; Warning: package 'SpaDES.project' is in use and will not be installed</span></span>
<span><span class="co"># Initiate a simInit and spades call:</span></span>
<span><span class="co"># do.call(SpaDES.core::simInitAndSpades, out)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="pass-args-from-globalenv">Pass args from GlobalEnv<a class="anchor" aria-label="anchor" href="#pass-args-from-globalenv"></a>
</h3>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">studyAreaName</span> <span class="op">&lt;-</span> <span class="st">"AB"</span></span>
<span><span class="va">out</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/setupProject.html">setupProject</a></span><span class="op">(</span></span>
<span>  paths <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>projectPath <span class="op">=</span> <span class="st">"example_7"</span><span class="op">)</span>,</span>
<span>  modules <span class="op">=</span> <span class="st">"PredictiveEcology/Biomass_borealDataPrep@development"</span>,</span>
<span>  defaultDots <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>mode <span class="op">=</span> <span class="st">"development"</span>,</span>
<span>                     studyAreaName <span class="op">=</span> <span class="st">"MB"</span><span class="op">)</span>,</span>
<span>  mode <span class="op">=</span> <span class="st">"development"</span>,</span>
<span>  studyAreaName <span class="op">=</span> <span class="va">studyAreaName</span>  <span class="co"># &lt;----- pass it here, naming it</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; package 'pkgbuild' successfully unpacked and MD5 sums checked</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; The downloaded binary packages are in</span></span>
<span><span class="co">#&gt;  C:\Users\emcintir\AppData\Local\Temp\Rtmp63PEH3\downloaded_packages</span></span>
<span><span class="co">#&gt; Warning: package 'SpaDES.project' is in use and will not be installed</span></span>
<span><span class="co"># Initiate a simInit and spades call:</span></span>
<span><span class="co"># do.call(SpaDES.core::simInitAndSpades, out)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="mixing-argument-a-named-list-a-github-file-and-local-file">Mixing argument: a named list, a github file and local file<a class="anchor" aria-label="anchor" href="#mixing-argument-a-named-list-a-github-file-and-local-file"></a>
</h3>
<p>There are several ways to specifying an argument, as we have seen. We
can also mix and match these ways:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">out</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/setupProject.html">setupProject</a></span><span class="op">(</span></span>
<span>  options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    reproducible.useTerra <span class="op">=</span> <span class="cn">TRUE</span>,                                 <span class="co"># direct argument # sets one option</span></span>
<span>    <span class="st">"PredictiveEcology/SpaDES.project@transition/inst/options.R"</span>, <span class="co"># remote file -- sets many options</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"authentication.R"</span>, package <span class="op">=</span> <span class="st">"SpaDES.project"</span><span class="op">)</span>   <span class="co"># local file -- sets gargle options</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="studyarea-argument">
<code>studyArea</code> argument<a class="anchor" aria-label="anchor" href="#studyarea-argument"></a>
</h3>
<p><code><a href="../reference/setup.html">?setupStudyArea</a></code> for more details. A user can choose to
use the internal <code>setupStudyArea</code> function, which will use
the <code>gadm</code> global database. Setting the
<code>studyArea</code> argument to a <code>list</code> will trigger the
use of <code>setupStudyArea</code>.</p>
<div class="section level4">
<h4 id="alberta-and-british-columbia-canada">Alberta and British Columbia, Canada<a class="anchor" aria-label="anchor" href="#alberta-and-british-columbia-canada"></a>
</h4>
<p>In this example, we will select an area in northwestern Alberta and
the adjacent northeastern BC, Canada. We use the internal matching,
because we aren’t sure of the exact names: for the top level
(<code>NAME_1</code>), we use either “Al” or “Brit”, separated by the
“or” symbol, <code>|</code>. For the second level, we do the same, but
specify using the names in that column. If a user does not know which
values exist, they can not specify <code>NAME_2</code>, then visualize
the resulting map and click on values, such as:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">out</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/setup.html">setupStudyArea</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"Al|Brit"</span>, level <span class="op">=</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://quickplot.predictiveecology.org" class="external-link">quickPlot</a></span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://quickplot.predictiveecology.org/reference/dev.html" class="external-link">dev</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># open a non-RStudio window; can't use RStudio for `clickValues` below</span></span>
<span>  <span class="fu"><a href="https://quickplot.predictiveecology.org/reference/Plot.html" class="external-link">Plot</a></span><span class="op">(</span><span class="va">out</span><span class="op">)</span></span>
<span>  <span class="va">val</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://quickplot.predictiveecology.org/reference/quickPlotMouseClicks.html" class="external-link">clickValues</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="va">out</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/setup.html">setupStudyArea</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"Al|Brit"</span>, level <span class="op">=</span> <span class="fl">2</span>, NAME_2 <span class="op">=</span> <span class="va">val</span><span class="op">$</span><span class="va">NAME_2</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://quickplot.predictiveecology.org/reference/Plot.html" class="external-link">Plot</a></span><span class="op">(</span><span class="va">out</span>, new <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co"># need "new = TRUE" to clear previous map </span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># Can pick multiple parts with partial matching</span></span>
<span><span class="va">out</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/setup.html">setupStudyArea</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"Al|Brit"</span>, level <span class="op">=</span> <span class="fl">2</span>, NAME_2 <span class="op">=</span> <span class="st">"19|18|17|Peace"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="specify-an-epsg">Specify an <code>epsg</code><a class="anchor" aria-label="anchor" href="#specify-an-epsg"></a>
</h4>
<p>We can get the <code>studyArea</code> in a different projection if we
specify the <code>epsg</code> code.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">out</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/setupProject.html">setupProject</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"example_10"</span>,</span>
<span>  studyArea <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"Al|Brit|Sas"</span>, level <span class="op">=</span> <span class="fl">2</span>, epsg <span class="op">=</span> <span class="st">"3005"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="require-and-objects-arguments">
<code>require</code> and <code>objects</code> arguments<a class="anchor" aria-label="anchor" href="#require-and-objects-arguments"></a>
</h3>
<p>Using the <code>require</code> argument, calls
<code><a href="https://Require.predictiveecology.org/reference/Require.html" class="external-link">Require::Require()</a></code>, which <em>installs and loads</em>
packages i.e., equivalent to <code>install.packages(...)</code> and
<code><a href="https://rdrr.io/r/base/library.html" class="external-link">require(...)</a></code> on the named packages). <code>objects</code>
accepts a list of arbitrary objects that will be returned at the end of
this function call. Any code that needs executing will run, and they
will have access to all the <code>packages</code> and
<code>require</code> packages, plus any other arguments (e.g.,
<code>paths</code> or other named arguments in the <code>...</code>)
that preceded it in the call.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">out</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/setupProject.html">setupProject</a></span><span class="op">(</span></span>
<span>  paths <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>projectPath <span class="op">=</span> <span class="st">"example_11"</span><span class="op">)</span>, <span class="co"># will deduce name of project from projectPath</span></span>
<span>  standAlone <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  require <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"PredictiveEcology/reproducible@development (&gt;= 1.2.16.9017)"</span>,</span>
<span>    <span class="st">"PredictiveEcology/SpaDES.core@development (&gt;= 1.1.0.9001)"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  modules <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"PredictiveEcology/Biomass_speciesData@master"</span>,</span>
<span>    <span class="st">"PredictiveEcology/Biomass_borealDataPrep@development"</span>,</span>
<span>    <span class="st">"PredictiveEcology/Biomass_core@master"</span>,</span>
<span>    <span class="st">"PredictiveEcology/Biomass_validationKNN@master"</span>,</span>
<span>    <span class="st">"PredictiveEcology/Biomass_speciesParameters@development"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  objects <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    studyAreaLarge <span class="op">=</span> <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/vect.html" class="external-link">vect</a></span><span class="op">(</span></span>
<span>      <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/ext.html" class="external-link">ext</a></span><span class="op">(</span><span class="op">-</span><span class="fl">598722</span>, <span class="op">-</span><span class="fl">557858</span>,</span>
<span>                 <span class="fl">776827</span>, <span class="fl">837385</span><span class="op">)</span>,</span>
<span>      crs <span class="op">=</span> <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/crs.html" class="external-link">crs</a></span><span class="op">(</span><span class="st">"epsg:3978"</span><span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    studyArea <span class="op">=</span> <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/vect.html" class="external-link">vect</a></span><span class="op">(</span></span>
<span>      <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/ext.html" class="external-link">ext</a></span><span class="op">(</span><span class="op">-</span><span class="fl">598722</span>, <span class="op">-</span><span class="fl">578177</span>,</span>
<span>                 <span class="fl">779252</span>, <span class="fl">809573</span><span class="op">)</span>,</span>
<span>      crs <span class="op">=</span> <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/crs.html" class="external-link">crs</a></span><span class="op">(</span><span class="st">"epsg:3978"</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co"># Initiate a simInit and spades call:</span></span>
<span><span class="co"># do.call(SpaDES.core::simInitAndSpades, out)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="passing-named-arguments-as-part-of-the----">Passing named arguments as part of the <code>...</code><a class="anchor" aria-label="anchor" href="#passing-named-arguments-as-part-of-the----"></a>
</h3>
<p>Sometimes it is just as easy to pass objects directly to named
arguments, skipping the use of the <code>objects</code> argument. These
will be returned at the top level of the list, instead of within the
<code>objects</code> list element. Recent versions of
<code>SpaDES.core</code> allow <code>...</code> to be passed to
<code>simInit</code>, so it can handle either using <code>objects</code>
(the original way to pass arguments to <code>simInit</code>) or just
arbitrarily named arguments.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">out</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/setupProject.html">setupProject</a></span><span class="op">(</span></span>
<span>  paths <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>projectPath <span class="op">=</span> <span class="st">"example_12"</span><span class="op">)</span>, <span class="co"># will deduce name of project from projectPath</span></span>
<span>  standAlone <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  require <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"PredictiveEcology/reproducible@development (&gt;= 1.2.16.9017)"</span>,</span>
<span>    <span class="st">"PredictiveEcology/SpaDES.core@development (&gt;= 1.1.0.9001)"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  modules <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"PredictiveEcology/Biomass_speciesData@master"</span>,</span>
<span>    <span class="st">"PredictiveEcology/Biomass_borealDataPrep@development"</span>,</span>
<span>    <span class="st">"PredictiveEcology/Biomass_core@master"</span>,</span>
<span>    <span class="st">"PredictiveEcology/Biomass_validationKNN@master"</span>,</span>
<span>    <span class="st">"PredictiveEcology/Biomass_speciesParameters@development"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  studyAreaLarge <span class="op">=</span> <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/vect.html" class="external-link">vect</a></span><span class="op">(</span></span>
<span>    <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/ext.html" class="external-link">ext</a></span><span class="op">(</span><span class="op">-</span><span class="fl">598722</span>, <span class="op">-</span><span class="fl">557858</span>, <span class="fl">776827</span>, <span class="fl">837385</span><span class="op">)</span>,</span>
<span>    crs <span class="op">=</span> <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/crs.html" class="external-link">crs</a></span><span class="op">(</span><span class="st">"epsg:3978"</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  studyArea <span class="op">=</span> <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/vect.html" class="external-link">vect</a></span><span class="op">(</span></span>
<span>    <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/ext.html" class="external-link">ext</a></span><span class="op">(</span><span class="op">-</span><span class="fl">598722</span>, <span class="op">-</span><span class="fl">578177</span>, <span class="fl">779252</span>, <span class="fl">809573</span><span class="op">)</span>,</span>
<span>    crs <span class="op">=</span> <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/crs.html" class="external-link">crs</a></span><span class="op">(</span><span class="st">"epsg:3978"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co"># Initiate a simInit and spades call:</span></span>
<span><span class="co"># do.call(SpaDES.core::simInitAndSpades, out)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="make-project-level-change-to--libpaths-that-is-persistent">Make project-level change to .libPaths() that is persistent<a class="anchor" aria-label="anchor" href="#make-project-level-change-to--libpaths-that-is-persistent"></a>
</h3>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">out</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/setupProject.html">setupProject</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"example_13"</span>,</span>
<span>  packages <span class="op">=</span> <span class="st">"terra"</span>,</span>
<span>  updateRprofile <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Eliot J B McIntire.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
